# 数据绑定、响应式编程和管道

## 数据绑定
### 使用插值表达式 
<h1>{{productTitle}}</h1>


组件控制器->Dom
inputElement.value==="A value"
### 使用方括号 属性绑定
<img [src] ="imgUrl">

<img src="{{imgUrl}}">
插值表达式将被翻译为属性绑定
插值表达式和属性绑定是一个东西

html属性和dom属性的区别
每个html标签都会生成一个Dom，如input标签生成domInputElement
html属性是初始值不可变
dom属性随时改变
模板绑定使用DOM属性和事件来工作的，而不是Html属性

控制器->模板
HTML属性绑定
浏览器会同步html和dom
UI回和DOM

- 基本Html属性绑定
```Html
<div [attr.colsapan]="tableColspan">
```

-  css类绑定
```Html
<div class="aaa bbb">
<div [class]="someExprission">
<div [class.special]="布尔值">
special.是样式
setTimeout(()=>{
    this.big='b'
})
<div [ngClass]="{
    aaa:isA,bbb:isB
    css类：表达式true或false  
}">
```
- 样式绑定
```Html
<button [style.color]="isSpecial?'red':'green' "> 
table中的colspan
当没有Dom属性时，则需要使用html绑定
​```Html
<td [attr.colspan]="size"></td>
```

<button disabled="false">点我</button>

<input value="tom" (input)="doOnInput($event)">

```TypeScript
imgUrl:string="http://placehold.it/800x320"
doOnInput(event:any){
    console.log(event.target.value)
    console.log(event.target.getAttribute("value"))
}



```




### 使用小括号 事件绑定，
<input (事件名称)="执行发生时执行的表达式">
小括号表示这是个事件绑定
组件方法名称 
浏览器事件对象$event
也可以赋值


```TypeScript

onclick(event:any){
    console.log(event)
}
```

### 双向绑定
事件不同标签，不一样
<input [(ngModel)]="name">




## 响应式编程
观察者模式与Rxjs
可观察对象Observable
观察者Observer
订阅Subsciption
操作符

你可以创建所有事务的数据流
创建流
组合过滤
流转换

```TypeScript
constructor(){
    Observable.from([1,2,3,4])
    .filter(e=>e%2==0)
    .map(e=>e*e)
    .subscribe(
    e=>console.log(e),
    err=>console.error(err),
    ()=>console.log("结束了")
    )
}

```
模板本地变量#myfield 其实他就是$event  myfield.value
把事件当作永不结束的流来处理
```Html

<input #myfield (key)="onKey(myfield.value)"  >
```

ReactiveFormModel
FormControl对象，每一个表单元素都会默认有一个FormControl。valueChange事件组成一个可订阅的流
angular指令

```Html
<input [con]>
```


```TypeScript
constructor(){
    this.searchInput.valueChanges
.debounceTime(500)
.subscrie()
}


```


## 管道
原始值到期望值的转换 | data
函数
多个管道可以链接
| uppercase


```Html


<p>{{birthday | data:'yyyy-MM-dd HH'}}</p>
<p>{{pi|number:'2.最少小数位-2'}</p>
<p>{{| aysnc}}</p> 处理异步响应流
```

自定义管道
ng g pipe pipe/multiple
需要申明再模块的declaration中
```TypeScript


```