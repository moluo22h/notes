kubernetes是如何找到满足pod要求的节点的呢？



预选策略（Predicate）排除不满足要求的结点

```yaml
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution
      nodeSelectorTerms:
      - matchExpressions:
        - key: beta.kubernetes.io/arch
          operator: In
          values:
          - amd64
```

优选策略（priority）对上一步筛选出来的node进行评分，选择最高分的node作为pod的部署节点

```yaml
affinity:
  nodeAffinity:
    preferredDuringSchedulingIgnoredDuringExecurtion:
    - weight: 1
      preference:
        matchExpressions:
        - key: disktype
          operator: NotIn
          values:
          - ssd
```

   

```yaml
affinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
    - labelSelector:
        matchExpressions:
        - key: app
          operator: In
          values:
          - web-demo
        topologkey:kubernetes.io/hostname
    preferredDuringSchedulingIgnoredDuringExecurtion:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app
            operator: In
            values:
              - web-demo-node
        topologykey: kubernetes.io/hostname
```

